{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/mayur/Documents/GitHub/AHM-Corporation-CoWIN/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/mayur/Documents/GitHub/AHM-Corporation-CoWIN/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:/Users/mayur/Documents/GitHub/AHM-Corporation-CoWIN/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/mayur/Documents/GitHub/AHM-Corporation-CoWIN/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nvar _jsxFileName = \"C:\\\\Users\\\\mayur\\\\Documents\\\\GitHub\\\\AHM-Corporation-CoWIN\\\\src\\\\Pages\\\\AvailabilityDetails.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport axios from 'axios';\nimport CenterDetails from '../Components/Center-Details';\nimport NoCenter from '../Components/No-Center/NoCenter';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar date = new Date();\nvar currentDate = date.getDate();\nvar hourHand = date.getHours();\nvar month = date.getMonth() + 1;\n\nif (hourHand > 9) {\n  ++currentDate;\n}\n\nvar api = \"https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/findByDistrict?district_id=770&date=\".concat(currentDate, \"-\").concat(month, \"-2021\");\nconsole.log(currentDate + \" - \" + month);\n\nvar AvailabilityDetails = /*#__PURE__*/function () {\n  function AvailabilityDetails() {\n    _classCallCheck(this, AvailabilityDetails);\n\n    this.state = {\n      center: []\n    };\n    this.syncStates = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _yield$axios$get, data;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return axios.get(api, {\n                responseType: \"application/json\"\n              });\n\n            case 3:\n              _yield$axios$get = _context.sent;\n              data = _yield$axios$get.data;\n\n              if (data.sessions.length) {\n                data.sessions = data.sessions.map(function (center) {\n                  if (center.available_capacity > 0 && center.min_age_limit === 18) {\n                    setCenter(function (prevState) {\n                      return prevState.concat(center);\n                    });\n                  }\n                });\n              }\n\n              _context.next = 11;\n              break;\n\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 8]]);\n    }));\n  }\n\n  _createClass(AvailabilityDetails, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this = this;\n\n      this.interval = setInterval(function () {\n        return _this.syncStates();\n      }, 1000);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      clearInterval(this.interval);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return this.state.center.length ? center.map(function (cntr) {\n        return /*#__PURE__*/_jsxDEV(CenterDetails, {\n          name: cntr.name,\n          address: cntr.address,\n          pincode: cntr.pincode,\n          vaccine: cntr.vaccine,\n          date: cntr.date\n        }, cntr.center_id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 6\n        }, _this2);\n      }) : /*#__PURE__*/_jsxDEV(NoCenter, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 4\n      }, this);\n    }\n  }]);\n\n  return AvailabilityDetails;\n}();\n\nexport default AvailabilityDetails;","map":{"version":3,"sources":["C:/Users/mayur/Documents/GitHub/AHM-Corporation-CoWIN/src/Pages/AvailabilityDetails.js"],"names":["React","useState","useEffect","useHistory","axios","CenterDetails","NoCenter","date","Date","currentDate","getDate","hourHand","getHours","month","getMonth","api","console","log","AvailabilityDetails","state","center","syncStates","get","responseType","data","sessions","length","map","available_capacity","min_age_limit","setCenter","prevState","concat","interval","setInterval","clearInterval","cntr","name","address","pincode","vaccine","center_id"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA2BC,SAA3B,QAA6C,OAA7C;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,aAAP,MAA0B,8BAA1B;AACA,OAAOC,QAAP,MAAqB,kCAArB;;AAIA,IAAIC,IAAI,GAAG,IAAIC,IAAJ,EAAX;AACA,IAAIC,WAAW,GAAEF,IAAI,CAACG,OAAL,EAAjB;AACA,IAAIC,QAAQ,GAACJ,IAAI,CAACK,QAAL,EAAb;AACA,IAAIC,KAAK,GAAEN,IAAI,CAACO,QAAL,EAAD,GAAkB,CAA5B;;AACA,IAAGH,QAAQ,GAAC,CAAZ,EAAc;AACZ,IAAEF,WAAF;AACD;;AAED,IAAMM,GAAG,8GAC6FN,WAD7F,cAC4GI,KAD5G,UAAT;AAEAG,OAAO,CAACC,GAAR,CAAYR,WAAW,GAAE,KAAb,GAAqBI,KAAjC;;IAGOK,mB;;;;SACNC,K,GAAQ;AAACC,MAAAA,MAAM,EAAG;AAAV,K;SAEPC,U,yEAAa;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEYjB,KAAK,CAACkB,GAAN,CAAUP,GAAV,EAAe;AACvCQ,gBAAAA,YAAY,EAAE;AADyB,eAAf,CAFZ;;AAAA;AAAA;AAEHC,cAAAA,IAFG,oBAEHA,IAFG;;AAMX,kBAAIA,IAAI,CAACC,QAAL,CAAcC,MAAlB,EAA0B;AAC3BF,gBAAAA,IAAI,CAACC,QAAL,GAAgBD,IAAI,CAACC,QAAL,CAAcE,GAAd,CAAkB,UAACP,MAAD,EAAY;AAC5C,sBAAIA,MAAM,CAACQ,kBAAP,GAA4B,CAA5B,IAAiCR,MAAM,CAACS,aAAP,KAAyB,EAA9D,EAAmE;AACpEC,oBAAAA,SAAS,CAAC,UAACC,SAAD,EAAe;AACvB,6BAAOA,SAAS,CAACC,MAAV,CAAiBZ,MAAjB,CAAP;AACD,qBAFQ,CAAT;AAGE;AACF,iBANe,CAAhB;AAOE;;AAdU;AAAA;;AAAA;AAAA;AAAA;AAgBXJ,cAAAA,OAAO,CAACC,GAAR;;AAhBW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,K;;;;;WAsBZ,6BAAoB;AAAA;;AACrB,WAAKgB,QAAL,GAAgBC,WAAW,CAAC;AAAA,eAAM,KAAI,CAACb,UAAL,EAAN;AAAA,OAAD,EAA0B,IAA1B,CAA3B;AACE;;;WAED,gCAAuB;AACxBc,MAAAA,aAAa,CAAC,KAAKF,QAAN,CAAb;AACE;;;WACH,kBAAQ;AAAA;;AACR,aAEC,KAAKd,KAAL,CAAWC,MAAX,CAAkBM,MAAlB,GACCN,MAAM,CAACO,GAAP,CAAW,UAACS,IAAD;AAAA,4BACT,QAAC,aAAD;AAED,UAAA,IAAI,EAAEA,IAAI,CAACC,IAFV;AAGD,UAAA,OAAO,EAAED,IAAI,CAACE,OAHb;AAID,UAAA,OAAO,EAAEF,IAAI,CAACG,OAJb;AAKD,UAAA,OAAO,EAAEH,IAAI,CAACI,OALb;AAMD,UAAA,IAAI,EAAEJ,IAAI,CAAC7B;AANV,WACI6B,IAAI,CAACK,SADT;AAAA;AAAA;AAAA;AAAA,kBADS;AAAA,OAAX,CADD,gBAaC,QAAC,QAAD;AAAA;AAAA;AAAA;AAAA,cAfF;AAmBE;;;;;;AAGH,eAAevB,mBAAf","sourcesContent":["import React, { useState , useEffect  } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport axios from 'axios'\r\nimport CenterDetails from '../Components/Center-Details'\r\nimport NoCenter from '../Components/No-Center/NoCenter'\r\n\r\n\r\n\r\nlet date = new Date();\r\nlet currentDate= date.getDate()\r\nlet hourHand=date.getHours();\r\nlet month=(date.getMonth())+1\r\nif(hourHand>9){\r\n  ++currentDate;\r\n}\r\n\r\nconst api =\r\n  `https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/findByDistrict?district_id=770&date=${currentDate}-${month}-2021`;\r\nconsole.log(currentDate +\" - \" + month)\r\n\r\n  \r\n class AvailabilityDetails {\r\n\tstate = {center : []};\r\n\r\n\t syncStates = async () => {\r\n\t\ttry {\r\n\t\t  const { data } = await axios.get(api, {\r\n\t\t\tresponseType: \"application/json\"\r\n\t\t  });\r\n\t\r\n\t\t  if (data.sessions.length) {\r\n\t\t\tdata.sessions = data.sessions.map((center) => {\r\n\t\t\t  if (center.available_capacity > 0 && center.min_age_limit === 18 ) {\r\n\t\t\t\tsetCenter((prevState) => {\r\n\t\t\t\t  return prevState.concat(center);\r\n\t\t\t\t});\r\n\t\t\t  }\r\n\t\t\t});\r\n\t\t  }\r\n\t\t} catch (err) {\r\n\t\t  console.log(err);\r\n\t\t}\r\n\t  };\r\n\r\n\r\n\r\n\t  componentDidMount() {\r\n\t\tthis.interval = setInterval(() => this.syncStates(), 1000);\r\n\t  }\r\n\t\r\n\t  componentWillUnmount() {\r\n\t\tclearInterval(this.interval);\r\n\t  }\r\n\trender(){\r\n\treturn (\r\n\t\t\r\n\t\tthis.state.center.length ? (\r\n\t\t\tcenter.map((cntr) => (\r\n\t\t\t  <CenterDetails \r\n\t\t\t\tkey={cntr.center_id}\r\n\t\t\t\tname={cntr.name} \r\n\t\t\t\taddress={cntr.address} \r\n\t\t\t\tpincode={cntr.pincode} \r\n\t\t\t\tvaccine={cntr.vaccine}\r\n\t\t\t\tdate={cntr.date}\r\n\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t\t))\r\n\t\t  ) : (\r\n\t\t\t<NoCenter/>\r\n\t\t  )\r\n\r\n\t\t\r\n\t)}\r\n}\r\n\r\nexport default AvailabilityDetails"]},"metadata":{},"sourceType":"module"}