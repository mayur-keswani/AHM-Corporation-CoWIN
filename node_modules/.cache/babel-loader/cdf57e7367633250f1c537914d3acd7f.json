{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/mayur/Documents/GitHub/AHM-Corporation-CoWIN/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/mayur/Documents/GitHub/AHM-Corporation-CoWIN/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:/Users/mayur/Documents/GitHub/AHM-Corporation-CoWIN/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\mayur\\\\Documents\\\\GitHub\\\\AHM-Corporation-CoWIN\\\\src\\\\Pages\\\\AvailabilityDetails.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, Component } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport axios from 'axios';\nimport CenterDetails from '../Components/Center-Details';\nimport NoCenter from '../Components/No-Center/NoCenter';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar date = new Date();\nvar currentDate = date.getDate();\nvar hourHand = date.getHours();\nvar month = date.getMonth() + 1;\n\nif (hourHand > 9 && currentDate !== 31) {\n  ++currentDate;\n}\n\nif (hourHand > 9 && currentDate === 31) {\n  currentDate = 1;\n}\n\nvar api = \"https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/findByDistrict?district_id=170&date=\".concat(currentDate, \"-\").concat(month, \"-2021\");\nconsole.log(currentDate + \" - \" + month);\n\nvar AvailabilityDetails = function AvailabilityDetails() {\n  _s();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      center = _useState2[0],\n      setCenter = _useState2[1];\n\n  var syncStates = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _yield$axios$get, data;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return axios.get(api, {\n                responseType: \"application/json\"\n              });\n\n            case 3:\n              _yield$axios$get = _context.sent;\n              data = _yield$axios$get.data;\n\n              //console.log(data)\n              if (data.sessions.length) {\n                data.sessions = data.sessions.map(function (center) {\n                  if (center.available_capacity > 0 && center.min_age_limit === 18) {\n                    setCenter(function (prevState) {\n                      return prevState.concat(center);\n                    });\n                  }\n                });\n              }\n\n              _context.next = 11;\n              break;\n\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 8]]);\n    }));\n\n    return function syncStates() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    syncStates();\n  }, []);\n  setTimeout(function () {\n    location.reload();\n  }, 10000);\n  return center.length ? center.map(function (cntr) {\n    return /*#__PURE__*/_jsxDEV(CenterDetails, {\n      name: cntr.name,\n      address: cntr.address,\n      pincode: cntr.pincode,\n      vaccine: cntr.vaccine,\n      available_capacity: cntr.available_capacity,\n      date: cntr.date\n    }, cntr.center_id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 6\n    }, _this);\n  }) : /*#__PURE__*/_jsxDEV(NoCenter, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 4\n  }, _this);\n};\n\n_s(AvailabilityDetails, \"KurhCjLfETGi2mcWvpDgRJSsQMM=\");\n\n_c = AvailabilityDetails;\nexport default AvailabilityDetails;\n\nvar _c;\n\n$RefreshReg$(_c, \"AvailabilityDetails\");","map":{"version":3,"sources":["C:/Users/mayur/Documents/GitHub/AHM-Corporation-CoWIN/src/Pages/AvailabilityDetails.js"],"names":["React","useState","useEffect","Component","useHistory","axios","CenterDetails","NoCenter","date","Date","currentDate","getDate","hourHand","getHours","month","getMonth","api","console","log","AvailabilityDetails","center","setCenter","syncStates","get","responseType","data","sessions","length","map","available_capacity","min_age_limit","prevState","concat","setTimeout","location","reload","cntr","name","address","pincode","vaccine","center_id"],"mappings":"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","sourcesContent":["import React, { useState , useEffect, Component  } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport axios from 'axios'\r\nimport CenterDetails from '../Components/Center-Details'\r\nimport NoCenter from '../Components/No-Center/NoCenter'\r\n\r\n\r\n\r\nlet date = new Date();\r\nlet currentDate= date.getDate()\r\nlet hourHand=date.getHours();\r\nlet month=(date.getMonth())+1\r\nif(hourHand>9 && currentDate!==31){\r\n\t++currentDate;\r\n  }\r\n  if(hourHand>9 && currentDate===31)\r\n  {\r\n\tcurrentDate=1\r\n  }\r\nconst api =\r\n  `https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/findByDistrict?district_id=170&date=${currentDate}-${month}-2021`;\r\nconsole.log(currentDate +\" - \" + month)\r\n\r\n  \r\n const AvailabilityDetails = ()=>{\r\n\tconst [center,setCenter] = useState([])\r\n\r\n\tconst syncStates = async () => {\r\n\t\ttry {\r\n\t\t  const { data } = await axios.get(api, {\r\n\t\t\tresponseType: \"application/json\"\r\n\t\t  });\r\n\t\t  //console.log(data)\r\n\t\t  if (data.sessions.length) {\r\n\t\t\tdata.sessions = data.sessions.map((center) => {\r\n\t\t\t  if (center.available_capacity > 0 && center.min_age_limit === 18 ) {\r\n\t\t\t\t  setCenter((prevState) => {\r\n\t\t\t\t  return prevState.concat(center);\r\n\t\t\t\t});\r\n\t\t\t  }\r\n\t\t\t});\r\n\t\t  }\r\n\t\t} catch (err) {\r\n\t\t  console.log(err);\r\n\t\t}\r\n\t  };\r\n\r\n\tuseEffect(()=>{\r\n\t\tsyncStates();\r\n\t},[])\r\n\t  setTimeout(() => {\r\n\t\tlocation.reload();\r\n\t  }, 10000);\r\n\t\r\n\r\n\t\r\n\treturn (\t\r\n\t\tcenter.length ? (\r\n\t\t\tcenter.map((cntr) => (\r\n\t\t\t  <CenterDetails \r\n\t\t\t\tkey={cntr.center_id}\r\n\t\t\t\tname={cntr.name} \r\n\t\t\t\taddress={cntr.address} \r\n\t\t\t\tpincode={cntr.pincode} \r\n\t\t\t\tvaccine={cntr.vaccine}\r\n\t\t\t\tavailable_capacity={cntr.available_capacity}\r\n\t\t\t\tdate={cntr.date}\r\n\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t\t))\r\n\t\t  ) \r\n\t\t  : \r\n\t\t\t<NoCenter/>\r\n\t\t  \r\n\t)\r\n}\r\n\r\nexport default AvailabilityDetails"]},"metadata":{},"sourceType":"module"}